let word, attempts = 6, letters_guessed = 0;
const board = document.getElementById("board");
const endGameBoard = document.getElementById("endGameBoard");

function savedWord() {
    word = document.getElementById("userInput").value;
    board.innerHTML = "";
    generateBoard();
}

function generateBoard() {
    document.getElementById("pictureHangman").src = attempts + ".jpg";
    document.getElementById("title").innerHTML = "Hangman";
    for (let i = 0; i < word.length; ++i) {
        board.innerHTML +=
       `<u style="display: inline-block" class="${word.charAt(i)}">_</u>
       `;
    }    
    document.getElementById("board").innerHTML += `<br><br>`;    
    for (let i = 'a'.charCodeAt(0); i <= 'z'.charCodeAt(0); ++i) {
        board.innerHTML += 
        `<button style="border-radius:10px;" class="btn btn-light" id="${String.fromCharCode(i)}" onclick="refreshBoard(this.id)">${String.fromCharCode(i)}</button>
        `;
    } 
}

function refreshBoard(elementID) {
    document.getElementById(elementID).disabled = true;
    if (word.includes(elementID) == false) {
        --attempts;
        document.getElementById("pictureHangman").src = attempts + ".jpg";
    } else {
        for (let i = 0; i < document.getElementsByClassName(elementID).length; ++i, ++letters_guessed) {
            document.getElementsByClassName(elementID)[i].innerHTML = elementID;
        }
    }
    if (attempts == 0 || letters_guessed == word.length) {
        endGame();
    }
}

function endGame() {
    if(attempts == 0) {
        endGameBoard.innerHTML = "Sorry, you lost &#128533";
    } else {
        endGameBoard.innerHTML = "Congrats, you won &#127881";
    }
    endGameBoard.innerHTML +=
    `<br><button class="btn btn-info" onclick="history.go(0)"> Play again </br>
    `;
}
